import{toRefs as e,ref as l,computed as a,watch as t,nextTick as i,inject as n,resolveComponent as s,resolveDirective as r,openBlock as u,createElementBlock as o,createElementVNode as d,normalizeClass as c,createCommentVNode as v,withModifiers as p,withDirectives as m,vModelText as h,Fragment as g,renderList as f,renderSlot as b,createTextVNode as y,toDisplayString as O,createVNode as S,normalizeStyle as w,withCtx as k}from"vue";function x(e){return-1!==[null,void 0,!1].indexOf(e)}function L(e,l=!0){return l?String(e).toLowerCase().trim():String(e).normalize("NFD").replace(/\p{Diacritic}/gu,"").toLowerCase().trim()}function P(n,s,r){const{options:u,mode:o,trackBy:d,limit:c,hideSelected:v,createTag:p,label:m,appendNewTag:h,multipleLabel:g,object:f,loading:b,delay:y,resolveOnLoad:O,minChars:S,filterResults:w,clearOnSearch:k,clearOnSelect:P,valueProp:C,canDeselect:B,max:A,strict:q,closeOnSelect:M,groups:I,groupLabel:E,groupOptions:R,groupHideEmpty:T,groupSelect:D,closeOnDeselect:V}=e(n),j=r.iv,N=r.ev,H=r.search,G=r.clearSearch,$=r.update,F=r.pointer,W=r.clearPointer,z=r.blur,K=r.deactivate,U=r.multiselect,J=r.updateDropPosition,Q=l([]),X=l([]),Y=l(!1),Z=l(null),ee=a((()=>{if(I.value){let e=X.value||[],l=[];return e.forEach((e=>{Ce(e[R.value]).forEach((a=>{l.push(Object.assign({},a,e.disabled?{disabled:!0}:{}))}))})),l}{let e=Ce(X.value||[]);return Q.value.length&&(e=e.concat(Q.value)),e}})),le=a((()=>I.value?Le((X.value||[]).map((e=>{const l=Ce(e[R.value]);return{...e,group:!0,[R.value]:Pe(l,!1).map((l=>Object.assign({},l,e.disabled?{disabled:!0}:{}))),__VISIBLE__:Pe(l).map((l=>Object.assign({},l,e.disabled?{disabled:!0}:{})))}}))):[])),ae=a((()=>{let e=ee.value;return ue.value.length&&(e=ue.value.concat(e)),e=Pe(e),c.value>0&&(e=e.slice(0,c.value)),e})),te=a((()=>{switch(o.value){case"single":return!x(j.value[C.value]);case"multiple":case"tags":return!x(j.value)&&j.value.length>0}})),ie=a((()=>{switch(o.value){case"single":return!_.isEmpty(j.value);case"multiple":case"tags":return!x(j.value)&&j.value.length>0}})),ne=a((()=>void 0!==g&&void 0!==g.value?g.value(j.value):j.value&&j.value.length>1?`${j.value.length} elem kiválasztva`:j.value[0].label)),se=a((()=>!ee.value.length&&!Y.value&&!ue.value.length)),re=a((()=>ee.value.length>0&&0==ae.value.length&&(H.value&&I.value||!I.value))),ue=a((()=>!1!==p.value&&H.value?-1!==ke(H.value)?[]:[{[C.value]:n.inputPrefix+H.value,[m.value]:H.value,[d.value]:H.value,additem:!0}]:[])),oe=a((()=>{switch(o.value){case"single":return null;case"multiple":case"tags":return[]}})),de=a((()=>b.value||Y.value)),ce=a((()=>{let e=0;return ae.value.forEach((l=>{be(l)&&e++})),e===ae.value.length})),ve=a((()=>{let e=0;return ee.value.forEach((l=>{be(l)&&e++})),0===e})),pe=e=>{switch("object"!=typeof e&&(e=we(e)),o.value){case"single":$(e);break;case"multiple":case"tags":$(Array.isArray(j.value)?j.value.concat(e):[j.value].concat(e)),"tags"===o.value&&i((()=>{J()}))}s.emit("select",he(e),e)},me=e=>{switch("object"!=typeof e&&(e=we(e)),o.value){case"single":fe();break;case"tags":case"multiple":$(Array.isArray(e)?j.value.filter((l=>-1===e.map((e=>e[C.value])).indexOf(l[C.value]))):j.value.filter((l=>l[C.value]!=e[C.value]))),"tags"===o.value&&i((()=>{J()}))}s.emit("deselect",he(e),e)},he=e=>f.value?e:e[C.value],ge=e=>{me(e)},fe=()=>{s.emit("clear"),$(oe.value)},be=e=>{if(void 0!==e.group)return"single"!==o.value&&(Se(e[R.value])&&e[R.value].length);switch(o.value){case"single":return!x(j.value)&&j.value[C.value]==e[C.value];case"tags":case"multiple":return!x(j.value)&&-1!==j.value.map((e=>e[C.value])).indexOf(e[C.value])}},ye=e=>!0===e.disabled,_e=()=>!(void 0===A||-1===A.value||!te.value&&A.value>0)&&j.value.length>=A.value,Oe=e=>void 0===e.find((e=>!be(e)&&!e.disabled)),Se=e=>void 0===e.find((e=>!be(e))),we=e=>ee.value[ee.value.map((e=>String(e[C.value]))).indexOf(String(e))],ke=(e,l=!0)=>ee.value.map((e=>e[d.value])).indexOf(e),xe=e=>{Q.value.push(e)},Le=e=>T.value?e.filter((e=>H.value?e.__VISIBLE__.length:e[R.value].length)):e.filter((e=>!H.value||e.__VISIBLE__.length)),Pe=(e,l=!0)=>{let a=e;return H.value&&w.value&&(a=a.filter((e=>-1!==L(e[d.value],q.value).indexOf(L(H.value,q.value))))),v.value&&l&&(a=a.filter((e=>!(e=>-1!==["tags","multiple"].indexOf(o.value)&&v.value&&be(e))(e)))),a},Ce=e=>{let l=e;var a;return a=l,"[object Object]"===Object.prototype.toString.call(a)&&(l=Object.keys(l).map((e=>{let a=l[e];return{[C.value]:e,[d.value]:a,[m.value]:a}}))),l=l.map((e=>"object"==typeof e?e:{[C.value]:e,[d.value]:e,[m.value]:e})),l},Be=()=>{x(N.value)||(j.value=qe(N.value),x(j.value.value)&&$(null))},Ae=e=>{Y.value=!0,u.value(H.value).then((l=>{X.value=l,"function"==typeof e&&e(l),Y.value=!1}))},qe=e=>{if(x(e))return"single"===o.value?{}:[];if(f.value)return e;if("single"===o.value)return we(e)||{};return("object"!=typeof e?[e]:e).filter((e=>!!we(e))).map((e=>we(e)))};if("single"!==o.value&&!x(N.value)&&!Array.isArray(N.value))throw new Error(`v-model must be an array when using "${o.value}" mode`);return u&&"function"==typeof u.value?O.value?Ae(Be):1==f.value&&Be():(X.value=u.value,Be()),y.value>-1&&t(H,(e=>{e.length<S.value||(Y.value=!0,k.value&&(X.value=[]),setTimeout((()=>{e==H.value&&u.value(H.value).then((l=>{e==H.value&&(X.value=l,F.value=ae.value.filter((e=>!0!==e.disabled))[0]||null,Y.value=!1)}))}),y.value))}),{flush:"sync"}),t(N,(e=>{if(x(e))j.value=qe(e);else switch(o.value){case"single":(f.value?e[C.value]!=j.value[C.value]:e!=j.value[C.value])&&(j.value=qe(e));break;case"multiple":case"tags":j.value=Array.isArray(j.value)?j.value:[j.value],function(e,l){const a=l.slice().sort();return e.length===l.length&&e.slice().sort().every((function(e,l){return e===a[l]}))}(f.value?e.map((e=>e[C.value])):e,j.value.map((e=>e[C.value])))||(j.value=qe(e))}}),{deep:!0}),t(M,((e,l)=>{Z.value="single"===o.value||e}),{deep:!0,immediate:!0}),"function"!=typeof n.options&&t(u,((e,l)=>{X.value=n.options,Object.keys(j.value).length||Be(),(()=>{if(te.value)if("single"===o.value){const e=we(j.value[C.value]);let l=e?e[m.value]:null;j.value[m.value]=l,f.value&&(N.value[m.value]=l)}else j.value.forEach(((e,l)=>{const a=we(j.value[l][C.value]);let t=a?a[m.value]:null;j.value[l][m.value]=t,f.value&&(N.value[l][m.value]=t)}))})()})),{fo:ae,filteredOptions:ae,selectAll:e=>{ce.value||(U.value.querySelector(".multiselect-options"),fe(),ae.value.forEach(((e,l)=>{pe(e)})))},deselectAll:e=>{fe()},isAll:ce,isClearAll:ve,hasSelected:te,multipleLabelText:ne,eo:ee,extendedOptions:ee,fg:le,filteredGroups:le,noOptions:se,noResults:re,resolving:Y,busy:de,select:pe,deselect:me,remove:ge,clear:fe,isSelected:be,isDisabled:ye,isMax:_e,getOption:we,handleOptionClick:e=>{if(!ye(e)){switch(o.value){case"single":if(be(e))return void(B.value&&(me(e),V.value&&z()));z(),pe(e);break;case"multiple":if(be(e))return void me(e);if(_e())return;pe(e),P.value&&G(),v.value&&W(),Z.value&&z();break;case"tags":if(be(e))return void me(e);if(_e())return;void 0===we(e[C.value])&&p.value&&(s.emit("tag",e[C.value]),h.value&&xe(e),G()),P.value&&G(),pe(e),v.value&&W(),Z.value&&z()}Z.value&&K()}},handleGroupClick:e=>{if(!ye(e)&&"single"!==o.value&&D.value){switch(o.value){case"multiple":case"tags":Oe(e[R.value])?me(e[R.value]):pe(e[R.value].filter((e=>-1===j.value.map((e=>e[C.value])).indexOf(e[C.value]))).filter((e=>!e.disabled)).filter(((e,l)=>j.value.length+1+l<=A.value||-1===A.value)))}Z.value&&K()}},handleTagRemove:(e,l)=>{0===l.button?ge(e):l.preventDefault()},refreshOptions:e=>{Ae(e)},resolveOptions:Ae,hasValid:ie,handleRemoveOption:(e,l)=>{me(e),(e=>{const l=u.value.map(((l,a)=>l===e?a:-1)).filter((e=>-1!==e));u.value.splice(l[0],1)})(e)}}}function C(t,n,s){const{searchable:r,disabled:u,isSelectAll:o,maxHeight:d}=e(t),c=s.input,v=(s.open,s.close),p=s.clearSearch,m=s.isOpen,h=s.isAddOpen,g=s.multi,f=l(null),b=l(!1),y=(l("dropdown-"+Math.random().toString().replace(".","-")),l(!1)),_=l(null),O=l(null),S=l(null),w=l(0),k=a((()=>r.value||u.value?-1:0)),x=a((()=>`${d.value+40}px`)),L=a((()=>d.value-2-(o.value?40:0)+"px")),P=new IntersectionObserver((function(e){e.forEach((e=>{e.isIntersecting&&e.intersectionRatio<1&&C(e.target)}))})),C=e=>{const l=f.value.getBoundingClientRect();e.style.right="inherit",e.style.bottom="inherit",e.style.transform="inherit","body"===t.container&&(e.style.left=l.x+"px",e.style.top=l.bottom+"px");const a=I().x+I().width,i=I().y+I().height,n=e.getBoundingClientRect().x+e.getBoundingClientRect().width,s=e.getBoundingClientRect().y+e.getBoundingClientRect().height;n>a&&("body"===t.container?(S.value=l.x-(e.getBoundingClientRect().width-(l.width+D())),S.value<0&&(e.style.maxWidth=e.getBoundingClientRect().width-Math.abs(S.value)+"px",S.value=0),e.style.left=S.value+"px"):(e.style.removeProperty("left"),e.style.left=l.width-e.getBoundingClientRect().width+"px")),I().height>e.getBoundingClientRect().height&&s>i&&(e.style.removeProperty("top"),e.style.bottom=l.height+"px")},B=()=>{if(T(),u.value||h.value)return;f.value.querySelector(".selectall-button-container");"body"===t.container&&(document.addEventListener("scroll",M,!0),document.body.append(O.value)),m.value=!0,n.emit("open"),i((()=>{O.value.style.setProperty("min-width",f.value.clientWidth+D()+2+"px"),A(),y.value||(P.observe(O.value),y.value=!0)}))},A=()=>{(e=>{const l=f.value.getBoundingClientRect();e.style.left=0,e.style.top=l.height+"px",e.style.removeProperty("width"),e.style.removeProperty("right"),e.style.removeProperty("bottom")})(O.value),C(O.value)},q=e=>{"body"===t.container&&(document.removeEventListener("scroll",M,!0),_.value&&_.value.append(O.value)),f.value.querySelector(".multiselect-dropdown").style.removeProperty("min-width"),m.value=!1,p(),n.emit("close")},M=e=>{e.target.contains(f.value)&&C(O.value)},I=()=>"body"===t.container?{x:0,y:0,width:window.innerWidth,height:window.innerHeight}:document.getElementById(t.container).getBoundingClientRect(),E=()=>{c.value&&(r.value&&c.value.blur(),f.value.blur())},R=()=>{b.value=!1,setTimeout((()=>{b.value||(q(),p())}),1)},T=()=>{g.value=f.value,g.optionRows=O},D=()=>t.inputmode&&w.value.clientWidth?w.value.clientWidth:0;return T(),{multiselect:f,tabindex:k,isActive:b,blur:E,handleFocus:e=>{if(u.value)return!1;r.value&&!u.value&&c.value&&c.value.focus()},activate:e=>{if(u.value||b.value)return!1;b.value=!0,B()},deactivate:R,handleCaretClick:()=>{R(),E()},contentMaxHeight:x,resize:e=>{m.value&&v()},scrollMaxHeight:L,openDropdown:B,closeDropdown:q,handleInputMousedown:e=>{if(m.value&&!r.value){const l=f.value.querySelector(".multiselect-input");l&&(l.dispatchEvent(new Event("blur")),l.blur()),e.preventDefault()}},options_container:_,optionRows:O,setScrollPosition:M,addGomb:w,updateDropPosition:A}}var B={name:"Multiselect",emits:["open","close","select","deselect","input","search-change","tag","update:modelValue","change","clear"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:String,required:!1,default:"label"},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!1},createTag:{type:Boolean,required:!1,default:!1},appendNewTag:{type:Boolean,required:!1,default:!0},caret:{type:Boolean,required:!1,default:!1},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:String,required:!1,default:"A lista üres"},noResultsText:{type:String,required:!1,default:"Nincs találat"},multipleLabel:{type:Function,required:!1},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},addTagOn:{type:Array,required:!1,default:()=>["enter"]},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!1},autocomplete:{type:String,required:!1},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},isSelectAll:{type:Boolean,default:!1},maxHeight:{type:Number,required:!1,default:320},container:{type:String,default:"body"},inputmode:{type:Boolean,default:!1},error_message_index:{type:String,default:""},error_message_name:{type:String,default:""},add_error_message_index:{type:String,default:""},add_error_message_name:{type:String,default:""},rand_error_num:{type:Number,default:Math.floor(1e4*Math.random())+1},error_point_name:{type:String,default:"global"},invalid:{type:Boolean,required:!1,default:!1},inputPrefix:{type:String,default:"new_"},mask:{type:Object,default:{mask:"F*",tokens:{F:{pattern:/./}}}},InputModeFieldValidate:{type:Function,default:e=>e},closeOnDeselect:{type:Boolean,required:!1,default:!0}},watch:{hasValid:{handler:function(e){let l=!1;!e&&this.required||(l=!0),this.ErrorMessage(l)}},invalid:{handler:function(e){this.isInvalid=e,this.ErrorMessage(this.is_valid)}},isAddOpen:{handler:function(e){this.AddErrorMessage(!e)},deep:!0},error_point_name:{handler:function(){this.ErrorMessage(this.is_valid)}},add_error_message_name:{handler:function(e){this.AddErrorMessage(!this.isAddOpen)}},required:{handler:function(e){this.isRequired=e,this.ErrorMessage(this.is_valid)},immediate:!0},inputmode:{handler:function(){this.isOpen=!1,this.isAddOpen=!1}}},methods:{ErrorMessage(e){this.ManageMessage(e,this.GetErrorMessageName(this.error_message_name,this.error_message_index?this.error_message_index:this.error_message_name))},AddErrorMessage(e){this.ManageMessage(e,this.GetErrorMessageName(this.add_error_message,this.add_error_message_index?this.add_error_message_index:this.add_error_message,!0))},ManageMessage(e,l){void 0===this.validation_error.form_errors[this.error_point_name]&&(this.validation_error.form_errors[this.error_point_name]=[]),e?delete this.validation_error.form_errors[this.error_point_name][l.name]:this.validation_error.form_errors[this.error_point_name][l.name]=l.value},GetErrorMessageName(e,l,a=!1){return""===e?a?{name:"fields.error_messages.select_field_add_error_"+this.rand_error_num,value:"fields.error_messages.select_field_add_error"}:{name:"fields.error_messages.select_field_error_"+this.rand_error_num,value:"fields.error_messages.select_field_error"}:{name:l,value:e}}},computed:{ErrorName(){return this.GetErrorMessageName(this.error_message_name,this.error_message_index?this.error_message_index:this.error_message_name)},AddErrorName(){return this.GetErrorMessageName(this.add_error_message_name,this.add_error_message_index?this.add_error_message_index:this.add_error_message_name,!0)},is_valid(){let e=!0;return(this.invalid||this.isAddOpen||this.required&&!this.hasValid)&&(e=!1),e},GetCustomMask(){return{...this.mask,customvalidate:{postvalidate:this.InputModeFieldValidate}}}},created(){window.addEventListener("resize",this.resize)},beforeUnmount(){this.closeDropdown()},unmounted(){delete this.validation_error.form_errors[this.error_point_name][this.ErrorName.name],delete this.validation_error.form_errors[this.error_point_name][this.AddErrorName.name],window.removeEventListener("resize",this.resize)},setup(s,r){const u=l(!1),o=n("force_validate",!1),d=n("validation_error"),c=function(t,i){const{value:n,modelValue:s,mode:r,valueProp:u}=e(t),o=l("single"!==r.value?[]:{}),d=void 0!==i.expose?s:n,c=a((()=>"single"===r.value?o.value[u.value]:o.value.map((e=>e[u.value])))),v=a((()=>"single"!==r.value?o.value.map((e=>e[u.value])).join(","):o.value[u.value]));return{iv:o,internalValue:o,ev:d,externalValue:d,textValue:v,plainValue:c}}(s,r),v=function(a,t,i){const{disabled:n}=e(a),s=l(!1);return{isOpen:s,open:()=>{s.value||n.value||(s.value=!0,t.emit("open"))},close:()=>{s.value&&(s.value=!1,t.emit("close"))}}}(s,r),p=function(e,a,n){n.dropdown;const s=n.multiselect,r=l(null),u=l(null);return t(r,(e=>{a.emit("search-change",e)})),{search:r,input:u,clearSearch:()=>{r.value=""},handleSearchInput:e=>{r.value=e.target.value,s.value&&i((()=>{const e=s.optionRows.value;s.value.clientWidth>e.clientWidth&&e.style.setProperty("min-width",s.value.clientWidth+2+"px")}))},handlePaste:e=>{a.emit("paste",e)}}}(0,r,{multiselect:u,dropdown:v}),m=function(a,t,i){const{groupSelect:n,mode:s,groups:r}=e(a),u=l(null),o=e=>{void 0===e||null!==e&&e.disabled||r.value&&e&&e.group&&("single"===s.value||!n.value)||(u.value=e)};return{pointer:u,setPointer:o,clearPointer:()=>{o(null)}}}(s),h=l(!1),g=C(s,r,{input:p.input,clearSearch:p.clearSearch,open:v.open,close:v.close,isOpen:v.isOpen,isAddOpen:h,multi:u}),f=function(l,a,t){const{object:i,valueProp:n,mode:s}=e(l),r=t.iv,u=e=>i.value||x(e)?e:Array.isArray(e)?e.map((e=>e[n.value])):e[n.value],o=e=>x(e)?"single"===s.value?{}:[]:e;return{update:e=>{r.value=o(e);const l=u(e);a.emit("change",l),a.emit("input",l),a.emit("update:modelValue",l)}}}(s,r,{iv:c.iv}),b=P(s,r,{ev:c.ev,iv:c.iv,search:p.search,clearSearch:p.clearSearch,update:f.update,pointer:m.pointer,clearPointer:m.clearPointer,blur:g.blur,deactivate:g.deactivate,multiselect:g.multiselect,updateDropPosition:g.updateDropPosition}),y=function(a,t,n){const{hasAdd:s,options:r,mode:u}=e(a),o=n.select,d=(n.update,n.isAddOpen),c=n.isSelected,v=l(null),p=l(null),m=(l([]),()=>{if(!v.value)return;const e=h(v.value);if(e.value)return void(c(e)||o(e.value));let l={value:a.inputPrefix+v.value,label:v.value,additem:!0};r.value.unshift(l),i((()=>{o(l)}))}),h=e=>{let l=!1;return r.value.forEach((a=>{a.label!==e||(l=a)})),l};return{add:v,isAddOpen:d,openAdd:()=>{d.value?(m(),d.value=!1):(d.value=!0,v.value="",i((()=>{p.value.focus()})))},addinput:p,closeAddInput:()=>{v.value="",d.value=!1}}}(s,0,{update:f.update,select:b.select,isSelected:b.isSelected,isAddOpen:h}),_=function(l,n,s){const{valueProp:r,showOptions:u,searchable:o,groupLabel:d,groups:c,mode:v,groupSelect:p}=e(l),m=s.fo,h=s.fg,g=s.handleOptionClick,f=s.handleGroupClick,b=(s.handleRemoveOption,s.search),y=s.pointer,_=s.setPointer,O=s.clearPointer,S=s.multiselect,w=a((()=>m.value.filter((e=>!e.disabled)))),k=a((()=>h.value.filter((e=>!e.disabled)))),x=a((()=>"single"!==v.value&&p.value)),L=a((()=>y.value&&y.value.group)),P=a((()=>D(y.value))),C=a((()=>{const e=L.value?y.value:D(y.value),l=k.value.map((e=>e[d.value])).indexOf(e[d.value]);let a=k.value[l-1];return void 0===a&&(a=A.value),a})),B=a((()=>{let e=k.value.map((e=>e.label)).indexOf(L.value?y.value[d.value]:D(y.value)[d.value])+1;return k.value.length<=e&&(e=0),k.value[e]})),A=a((()=>[...k.value].slice(-1)[0])),q=a((()=>y.value.__VISIBLE__.filter((e=>!e.disabled))[0])),M=a((()=>{const e=P.value.__VISIBLE__.filter((e=>!e.disabled));return e[e.map((e=>e[r.value])).indexOf(y.value[r.value])-1]})),I=a((()=>{const e=D(y.value).__VISIBLE__.filter((e=>!e.disabled));return e[e.map((e=>e[r.value])).indexOf(y.value[r.value])+1]})),E=a((()=>[...C.value.__VISIBLE__.filter((e=>!e.disabled))].slice(-1)[0])),R=a((()=>[...A.value.__VISIBLE__.filter((e=>!e.disabled))].slice(-1)[0])),T=()=>{_(w.value[0]||null)},D=e=>k.value.find((l=>-1!==l.__VISIBLE__.map((e=>e[r.value])).indexOf(e[r.value]))),V=()=>{let e=S.value.querySelector("[data-pointed]");if(!e)return;let l=e.parentElement.parentElement;c.value&&(l=L.value?e.parentElement.parentElement.parentElement:e.parentElement.parentElement.parentElement.parentElement),e.offsetTop+e.offsetHeight>l.clientHeight+l.scrollTop&&(l.scrollTop=e.offsetTop+e.offsetHeight-l.clientHeight),e.offsetTop<l.scrollTop&&(l.scrollTop=e.offsetTop)};return t(b,(e=>{o.value&&(e.length&&u.value?T():O())})),{pointer:y,canPointGroups:x,isPointed:e=>!(!y.value||!(!e.group&&y.value[r.value]==e[r.value]||void 0!==e.group&&y.value[d.value]==e[d.value]))||void 0,setPointerFirst:T,selectPointer:()=>{y.value&&!0!==y.value.disabled&&(L.value?f(y.value):g(y.value))},forwardPointer:()=>{if(null===y.value)_((c.value&&x.value?k.value[0]:w.value[0])||null);else if(c.value&&x.value){let e=L.value?q.value:I.value;void 0===e&&(e=B.value),_(e||null)}else{let e=w.value.map((e=>e[r.value])).indexOf(y.value[r.value])+1;w.value.length<=e&&(e=0),_(w.value[e]||null)}i((()=>{V()}))},backwardPointer:()=>{if(null===y.value){let e=w.value[w.value.length-1];c.value&&x.value&&(e=R.value,void 0===e&&(e=A.value)),_(e||null)}else if(c.value&&x.value){let e=L.value?E.value:M.value;void 0===e&&(e=L.value?C.value:P.value),_(e||null)}else{let e=w.value.map((e=>e[r.value])).indexOf(y.value[r.value])-1;e<0&&(e=w.value.length-1),_(w.value[e]||null)}i((()=>{V()}))}}}(s,0,{fo:b.fo,fg:b.fg,handleOptionClick:b.handleOptionClick,handleGroupClick:b.handleGroupClick,search:p.search,pointer:m.pointer,setPointer:m.setPointer,clearPointer:m.clearPointer,multiselect:g.multiselect}),O=function(l,a,t){const{mode:i,addTagOn:n,createTag:s,openDirection:r,searchable:u,showOptions:o,valueProp:d,groups:c}=e(l),v=t.iv,p=t.update,m=t.search,h=t.setPointer,g=t.selectPointer,f=t.backwardPointer,b=t.forwardPointer,y=t.blur,_=t.fo,O=t.isAddOpen,S=(t.multiselect,()=>{"tags"===i.value&&!o.value&&s.value&&u.value&&!c.value&&h(_.value[_.value.map((e=>e[d.value])).indexOf(m.value)])});return{handleKeydown:e=>{switch(e.keyCode){case 8:if("single"===i.value)return;if(u.value&&-1===[null,""].indexOf(m.value))return;if(0===v.value.length)return;if(O)return;p([...v.value].slice(0,-1));break;case 13:if(e.preventDefault(),"tags"===i.value&&-1===n.value.indexOf("enter")&&s.value)return;S(),g();break;case 32:if(O)return;if(u.value&&"tags"!==i.value&&!s.value)return;if("tags"===i.value&&(-1===n.value.indexOf("space")&&s.value||!s.value))return;e.preventDefault(),S(),g();break;case 9:case 186:case 188:if("tags"!==i.value)return;const l={9:"tab",186:";",188:","};if(-1===n.value.indexOf(l[e.keyCode])||!s.value)return;S(),g(),e.preventDefault();break;case 27:y();break;case 38:if(e.preventDefault(),!o.value)return;"top"===r.value?b():f();break;case 40:if(e.preventDefault(),!o.value)return;"top"===r.value?f():b()}},preparePointer:S}}(s,0,{iv:c.iv,update:f.update,search:p.search,setPointer:m.setPointer,selectPointer:_.selectPointer,backwardPointer:_.backwardPointer,forwardPointer:_.forwardPointer,blur:g.blur,fo:b.fo,isAddOpen:h,multiselect:g.multiselect}),S=function(t,i,n){const s=e(t),{disabled:r,openDirection:u,showOptions:o}=s,d=l(!1),c=l(!1),v=n.isOpen,p=n.isPointed,m=n.isSelected,h=n.isDisabled,g=n.isActive,f=n.canPointGroups,b=n.resolving,y=n.fo,_=n.isAddOpen,O=n.hasValid,S=n.force_validate,w=n.addValue,k={container:"multiselect form-select",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",singleLabel:"multiselect-single-label",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",dropdown:"multiselect-dropdown dropdown-menu py-0 shadow",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option dropdown-item",optionPointed:"is-pointed",optionSelected:"active",optionDisabled:"is-disabled",optionSelectedPointed:"active",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",spacer:"multiselect-spacer",addButton:"btn",addButtonOpen:"btn-success",addButtonClosed:"btn-outline-secondary",addButtonIcon:"mdi",addButtonIconOpen:"mdi-check",addButtonIconClosed:"mdi-plus",addMode:"add-mode",valid:"is-valid",invalid:"is-invalid",...s.classes.value},x=a((()=>!!(v.value&&o.value&&(!b.value||b.value&&y.value.length))));return{classList:a((()=>({container:[k.container].concat(r.value?k.containerDisabled:[]).concat(x.value&&"top"===u.value?k.containerOpenTop:[]).concat(x.value&&"top"!==u.value?k.containerOpen:[]).concat(g.value?k.containerActive:[]).concat(d.value||_.value&&S.value&&!w.value||S.value&&c.value&&!O.value?k.invalid:[]).concat(!S.value||d.value||c.value&&!O.value?[]:k.valid).concat(_.value?k.addMode:[]),spacer:k.spacer,singleLabel:k.singleLabel,multipleLabel:k.multipleLabel,search:k.search,tags:k.tags,tag:[k.tag].concat(r.value?k.tagDisabled:[]),tagRemove:k.tagRemove,tagRemoveIcon:k.tagRemoveIcon,tagsSearchWrapper:k.tagsSearchWrapper,tagsSearch:k.tagsSearch,tagsSearchCopy:k.tagsSearchCopy,placeholder:k.placeholder,caret:[k.caret].concat(v.value?k.caretOpen:[]),clear:k.clear,clearIcon:k.clearIcon,spinner:k.spinner,dropdown:[k.dropdown].concat("top"===u.value?k.dropdownTop:[]).concat(v.value&&o.value&&x.value?[]:k.dropdownHidden),options:[k.options].concat("top"===u.value?k.optionsTop:[]),group:k.group,groupLabel:e=>{let l=[k.groupLabel];return p(e)?l.push(m(e)?k.groupLabelSelectedPointed:k.groupLabelPointed):m(e)&&f.value?l.push(h(e)?k.groupLabelSelectedDisabled:k.groupLabelSelected):h(e)&&l.push(k.groupLabelDisabled),f.value&&l.push(k.groupLabelPointable),l},groupOptions:k.groupOptions,option:(e,l)=>{let a=[k.option];return p(e)?a.push(m(e)?k.optionSelectedPointed:k.optionPointed):m(e)?a.push(h(e)?k.optionSelectedDisabled:k.optionSelected):(h(e)||l&&h(l))&&a.push(k.optionDisabled),a},noOptions:k.noOptions,noResults:k.noResults,fakeInput:k.fakeInput,addButton:[k.addButton].concat(_.value?k.addButtonOpen:k.addButtonClosed),addButtonIcon:[k.addButtonIcon].concat(_.value?k.addButtonIconOpen:k.addButtonIconClosed)}))),showDropdown:x,isInvalid:d,isRequired:c}}(s,0,{isOpen:v.isOpen,isPointed:_.isPointed,canPointGroups:_.canPointGroups,isSelected:b.isSelected,isDisabled:b.isDisabled,isActive:g.isActive,resolving:b.resolving,fo:b.fo,isAddOpen:h,hasValid:b.hasValid,force_validate:o,addValue:y.add});return{...c,...v,...g,...m,...f,...p,...b,..._,...O,...S,...y,validation_error:d,force_validate:o}}};const A={class:"input-group"},q=["tabindex","id","error_message_name","error_message_index","add_error_message_name","add_error_message_index"],M=["type","modelValue","value","autocomplete"],I={key:1,class:"multiselect-add"},E=["onMousedown"],R=["type","modelValue","value","autocomplete"],T={class:"text-truncate"},D={ref:"options_container"},V={class:"position-relative"},j={class:"position-absolute selectall-button-container text-center"},N={class:"row g-0"},H={class:"col-6"},G=d("i",{class:"mdi mdi-check"},null,-1),$={class:"col-6"},F=d("i",{class:"mdi mdi-close"},null,-1),W=["data-pointed","onMouseenter","onClick"],z=["data-pointed","onMouseenter","onClick"],K={class:"d-flex w-100"},U={class:"flex-grow-1 text-truncate"},J=["onClick"],Q=[d("span",{class:"rounded-circle remove-option bg-danger d-flex justify-content-center text-white"},[d("i",{class:"mdi mdi-trash-can"})],-1)],X=["data-pointed","onMouseenter","onClick"],Y={class:"d-flex w-100"},Z={class:"flex-grow-1 text-truncate"},ee=["onClick"],le=[d("span",{class:"rounded-circle remove-option bg-danger d-flex justify-content-center text-white"},[d("i",{class:"mdi mdi-trash-can"})],-1)],ae=["innerHTML"],te=["innerHTML"],ie={key:1,class:"multiselect-close-all d-flex align-items-center selectall-check-all cursor-pointer"},ne=[d("div",{class:"text-center closeall-button-container col-12"},[d("i",{class:"mdi mdi-playlist-check"}),y(" Kész")],-1)],se=["value"],re=["name","value"],ue=["name","value"];B.render=function(e,l,a,t,i,n){const _=s("perfect-scrollbar"),x=r("maska");return u(),o("div",A,[d("div",{ref:"multiselect",tabindex:e.tabindex,class:c(e.classList.container),id:a.id,onFocusin:l[16]||(l[16]=(...l)=>e.activate&&e.activate(...l)),onClick:l[17]||(l[17]=(...l)=>e.activate&&e.activate(...l)),onFocusout:l[18]||(l[18]=(...l)=>e.deactivate&&e.deactivate(...l)),onKeydown:l[19]||(l[19]=(...l)=>e.handleKeydown&&e.handleKeydown(...l)),onFocus:l[20]||(l[20]=(...l)=>e.handleFocus&&e.handleFocus(...l)),error_message_name:a.error_message_name,error_message_index:a.error_message_index,add_error_message_name:a.add_error_message_name,add_error_message_index:a.add_error_message_index},[v(" Search "),"tags"===a.mode||!a.searchable||a.disabled||e.isAddOpen?v("v-if",!0):(u(),o("input",{key:0,type:a.inputType,modelValue:e.search,value:e.search,class:c(e.classList.search),autocomplete:a.autocomplete,onInput:l[0]||(l[0]=(...l)=>e.handleSearchInput&&e.handleSearchInput(...l)),onPaste:l[1]||(l[1]=p(((...l)=>e.handlePaste&&e.handlePaste(...l)),["stop"])),onMousedown:l[2]||(l[2]=(...l)=>e.handleInputMousedown&&e.handleInputMousedown(...l)),ref:"input"},null,42,M)),v(" Add Option Input "),e.isAddOpen?(u(),o("div",I,[m(d("input",{placeholder:"Új elem hozzáadása","onUpdate:modelValue":l[3]||(l[3]=l=>e.add=l),ref:"addinput"},null,512),[[h,e.add],[x,n.GetCustomMask]])])):v("v-if",!0),v(" Tags (with search) "),"tags"==a.mode?(u(),o("div",{key:2,class:c(e.classList.tags)},[(u(!0),o(g,null,f(e.iv,((l,t,i)=>b(e.$slots,"tag",{option:l,handleTagRemove:e.handleTagRemove,disabled:a.disabled},(()=>[(u(),o("span",{class:c(e.classList.tag),key:i},[y(O(l[a.label])+" ",1),a.disabled?v("v-if",!0):(u(),o("span",{key:0,class:c(e.classList.tagRemove),onMousedown:p((a=>e.handleTagRemove(l,a)),["prevent"])},[d("span",{class:c(e.classList.tagRemoveIcon)},null,2)],42,E))],2))])))),256)),d("div",{class:c(e.classList.tagsSearchWrapper)},[v(" Used for measuring search width "),d("span",{class:c(e.classList.tagsSearchCopy)},O(e.search),3),v(" Actual search input "),a.searchable&&!a.disabled?(u(),o("input",{key:0,type:a.inputType,modelValue:e.search,value:e.search,class:c(e.classList.tagsSearch),autocomplete:a.autocomplete,onInput:l[4]||(l[4]=(...l)=>e.handleSearchInput&&e.handleSearchInput(...l)),onPaste:l[5]||(l[5]=p(((...l)=>e.handlePaste&&e.handlePaste(...l)),["stop"])),ref:"input"},null,42,R)):v("v-if",!0)],2)],2)):v("v-if",!0),v(" Single label "),"single"==a.mode&&e.hasSelected&&!e.search&&e.iv&&!e.isAddOpen?b(e.$slots,"singlelabel",{key:3,value:e.iv},(()=>[d("div",{class:c(e.classList.singleLabel)},[d("span",T,O(e.iv[a.label]),1)],2)])):v("v-if",!0),v(" Multiple label "),"multiple"!=a.mode||!e.hasSelected||e.search||e.isAddOpen?v("v-if",!0):b(e.$slots,"multiplelabel",{key:4,values:e.iv},(()=>[d("div",{class:c(e.classList.multipleLabel)},O(e.multipleLabelText),3)])),v(" Placeholder "),!a.placeholder||e.hasSelected||e.search||e.isAddOpen?v("v-if",!0):b(e.$slots,"placeholder",{key:5},(()=>[d("div",{class:c(e.classList.placeholder)},O(a.placeholder),3)])),v(" Spinner "),e.busy?b(e.$slots,"spinner",{key:6},(()=>[d("span",{class:c(e.classList.spinner)},null,2)])):v("v-if",!0),v(" Clear "),v('       <slot v-if="hasSelected && !disabled && canClear && !busy" name="clear" :clear="clear">\n          <span :class="classList.clear" @mousedown="clear"><span :class="classList.clearIcon"></span></span>\n        </slot> '),v(" Caret "),a.caret?b(e.$slots,"caret",{key:7},(()=>[d("span",{class:c(e.classList.caret),onClick:l[6]||(l[6]=(...l)=>e.handleCaretClick&&e.handleCaretClick(...l))},null,2)])):v("v-if",!0),v(" Options "),d("div",D,[d("div",{class:c(e.classList.dropdown),tabindex:"-1",ref:"optionRows"},[d("div",V,[a.isSelectAll&&"single"!==a.mode?(u(),o("div",{key:0,class:"multiselect-select-all",onClick:l[11]||(l[11]=p((()=>{}),["stop","prevent"])),onMousedown:l[12]||(l[12]=p((()=>{}),["prevent"]))},[d("div",j,[d("div",N,[d("div",H,[d("div",{class:c(["p-2 text-truncate",{"selectall-check-all":!e.isAll,"selectall-check-none":e.isAll}]),onClick:l[7]||(l[7]=p(((...l)=>e.selectAll&&e.selectAll(...l)),["stop","prevent"])),onMousedown:l[8]||(l[8]=p((()=>{}),["prevent"]))},[G,y(" Mind kijelölése ")],34)]),d("div",$,[d("div",{class:c(["p-2 text-truncate",{"selectall-check-all":!e.isClearAll,"selectall-check-none":e.isClearAll}]),onClick:l[9]||(l[9]=p(((...l)=>e.deselectAll&&e.deselectAll(...l)),["stop","prevent"])),onMousedown:l[10]||(l[10]=p((()=>{}),["prevent"]))},[F,y(" Egyik sem ")],34)])])])],32)):v("v-if",!0),S(_,{class:"d-flex flex-column flex-fill",style:w({maxHeight:e.scrollMaxHeight})},{default:k((()=>[b(e.$slots,"beforelist",{options:e.fo}),d("ul",{class:c(e.classList.options)},[a.groups?(u(!0),o(g,{key:0},f(e.fg,((t,i,n)=>(u(),o("li",{class:c(e.classList.group),key:n},[d("div",{class:c(e.classList.groupLabel(t)),"data-pointed":e.isPointed(t),onMousedown:l[13]||(l[13]=p((()=>{}),["prevent"])),onMouseenter:l=>e.setPointer(t),onClick:p((l=>e.handleGroupClick(t)),["stop","prevent"])},[b(e.$slots,"grouplabel",{group:t},(()=>[d("span",null,O(t[a.groupLabel]),1)]))],42,W),d("ul",{class:c(e.classList.groupOptions)},[(u(!0),o(g,null,f(t.__VISIBLE__,((i,n,s)=>(u(),o("li",{class:c(e.classList.option(i,t)),key:s,onMousedown:l[14]||(l[14]=p((()=>{}),["prevent"])),"data-pointed":e.isPointed(i),onMouseenter:l=>e.setPointer(i),onClick:p((l=>e.handleOptionClick(i)),["stop","prevent"])},[b(e.$slots,"option",{option:i,search:e.search},(()=>[d("span",K,[d("span",U,O(i[a.label]),1),i.additem?(u(),o("span",{key:0,class:"pe-2",onClick:p((l=>e.handleRemoveOption(i,l)),["stop","prevent"])},Q,8,J)):v("v-if",!0)])]))],42,z)))),128))],2)],2)))),128)):(u(!0),o(g,{key:1},f(e.fo,((t,i,n)=>(u(),o("li",{class:c(e.classList.option(t)),key:n,onMousedown:l[15]||(l[15]=p((()=>{}),["prevent"])),"data-pointed":e.isPointed(t),onMouseenter:l=>e.setPointer(t),onClick:p((l=>e.handleOptionClick(t)),["stop","prevent"])},[b(e.$slots,"option",{option:t,search:e.search},(()=>[d("span",Y,[d("span",Z,O(t[a.label]),1),t.additem?(u(),o("span",{key:0,class:"pe-2",onClick:p((l=>e.handleRemoveOption(t,l)),["stop","prevent"])},le,8,ee)):v("v-if",!0)])]))],42,X)))),128))],2),e.noOptions?b(e.$slots,"nooptions",{key:0},(()=>[d("div",{class:c(e.classList.noOptions),innerHTML:a.noOptionsText},null,10,ae)])):v("v-if",!0),e.noResults?b(e.$slots,"noresults",{key:1},(()=>[d("div",{class:c(e.classList.noResults),innerHTML:a.noResultsText},null,10,te)])):v("v-if",!0),b(e.$slots,"afterlist",{options:e.fo})])),_:3},8,["style"]),"single"!==a.mode?(u(),o("div",ie,ne)):v("v-if",!0)])],2)],512),v(" Hacky input element to show HTML5 required warning "),a.required?(u(),o("input",{key:8,class:c(e.classList.fakeInput),tabindex:"-1",value:e.textValue,required:""},null,10,se)):v("v-if",!0),v(" Native input support "),a.nativeSupport?(u(),o(g,{key:9},["single"==a.mode?(u(),o("input",{key:0,type:"hidden",name:a.name,value:void 0!==e.plainValue?e.plainValue:""},null,8,re)):(u(!0),o(g,{key:1},f(e.plainValue,((e,l)=>(u(),o("input",{type:"hidden",name:`${a.name}[]`,value:e,key:l},null,8,ue)))),128))],64)):v("v-if",!0),v(" Create height for empty input "),d("div",{class:c(e.classList.spacer)},null,2)],42,q),v(" add open button "),a.inputmode&&"tags"!==a.mode&&!a.disabled?(u(),o("div",{key:0,class:c(e.classList.addButton),ref:"addGomb",onClick:l[21]||(l[21]=p(((...l)=>e.openAdd&&e.openAdd(...l)),["prevent"]))},[d("i",{class:c(e.classList.addButtonIcon)},null,2)],2)):v("v-if",!0)])},B.__file="src/Multiselect.vue";export default B;
